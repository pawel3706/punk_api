(this.webpackJsonppunk_api_project=this.webpackJsonppunk_api_project||[]).push([[0],{22:function(e,t,a){e.exports=a.p+"static/media/keg.2b3c14e3.png"},25:function(e,t,a){e.exports=a(38)},36:function(e,t,a){},37:function(e,t,a){},38:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(20),l=a.n(r),o=a(2),i=a(3),s=a(5),u=a(4),m=a(6),d=(a(30),a(12)),p=a(11),h=a(21),f=a(10),g=a(22),v=a.n(g);function E(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function b(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?E(a,!0).forEach((function(t){Object(h.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):E(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var N=c.a.createContext(),x=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).fetchData=function(e){return fetch(e).then((function(e){return e.json()})).then((function(e){return e.map((function(e){var t=e.id,n=e.image_url,c=e.name,r=e.description;n=n||v.a;var l=a.state.prices.findIndex((function(e){return e.id===t})),o=-1!==l?a.state.prices[l].price:Math.floor(46*Math.random()+5);return-1===l&&a.state.prices.push({id:t,price:o}),{id:t,image_url:n,name:c,text:r,price:o,size:{height:199.469,width:-1!==n.indexOf("keg")?100:70},inCart:a.state.cart.length>0&&-1!==a.state.cart.findIndex((function(e){return e.id===t})),count:0,total:0,avaliableProducts:9}}))})).catch((function(e){return console.log("B\u0142\u0105d",e)}))},a.getProducts=function(){var e=a.state,t=e.pageLimit,n=e.currentPage,c="https://api.punkapi.com/v2/beers?page=".concat(n,"&per_page=").concat(t);a.fetchData(c).then((function(e){var t=e;a.setState({products:t,productsUpdate:!0},(function(){return a.setState({productsUpdate:!1})}))}))},a.getSearchOptions=function(e){var t=e;[" ","#","&"].forEach((function(e){return t=t.split(e).join(" "===e?"_":"")}));var n="https://api.punkapi.com/v2/beers?beer_name=".concat(t);a.fetchData(n).then((function(t){a.setState({searchPhrase:e,products:Object(f.a)(t),showOptions:!0})}))},a.resetProducts=function(){a.setState({products:[],currentPage:1})},a.resetShowOptions=function(){a.setState({showOptions:!1})},a.openModal=function(e){var t=a.state.products.find((function(t){return t.id===e}));a.setState({modalIsOpen:!0,modalProduct:t})},a.closeModal=function(){a.setState({modalIsOpen:!1,modalProduct:""})},a.changeProductCount=function(e,t){var n=a.state.cart,c=n.findIndex((function(t){return t.id===e})),r=n[c];t?r.count--:r.count++,r.total=r.count*r.price,a.setState({cart:a.state.cart},(function(){return a.changeTotalAmount()}))},a.changeTotalAmount=function(){var e=0;Object(f.a)(a.state.cart).forEach((function(t){return e+=t.total})),a.setState({totalAmount:e})},a.addToCart=function(e){var t=Object(f.a)(a.state.products),n=t.findIndex((function(t){return t.id===e})),c=t[n];c.inCart=!0,c.count=1,c.total=c.price,a.setState({cart:[].concat(Object(f.a)(a.state.cart),[c]),products:t},(function(){return a.changeTotalAmount()}))},a.removeItemFromCart=function(e){var t=a.state,n=t.cart,c=t.products,r=n.find((function(t){return t.id===e})),l=n.indexOf(r);n.splice(l,1);var o=c.find((function(t){return t.id===e}));o&&(o.inCart=!1,o.count=0,o.total=0),a.setState({products:c,cart:n},(function(){return a.changeTotalAmount()}))},a.removeAllFromCart=function(){var e=Object(f.a)(a.state.products);e.filter((function(e){return!0===e.inCart})).map((function(e){return e.inCart=!1})),a.setState({products:e,cart:""},(function(){return a.changeTotalAmount()}))},a.changePage=function(e){"previous"===e?a.setState({currentPage:a.state.currentPage-2},(function(){return a.getProducts()})):"next"===e?a.setState({currentPage:a.state.currentPage+2},(function(){return a.getProducts()})):a.setState({currentPage:e},(function(){return a.getProducts()}))},a.state={products:[],modalIsOpen:!1,modalProduct:"",cart:"",totalAmount:0,pageLimit:12,currentPage:1,productNumber:325,searchPhrase:"",showOptions:!1,prices:[],productsUpdate:!1},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return c.a.createElement(N.Provider,{value:b({},this.state,{getProducts:this.getProducts,openModal:this.openModal,closeModal:this.closeModal,addToCart:this.addToCart,changeProductCount:this.changeProductCount,changeTotalAmount:this.changeTotalAmount,removeItemFromCart:this.removeItemFromCart,removeAllFromCart:this.removeAllFromCart,changePage:this.changePage,getSearchOptions:this.getSearchOptions,resetShowOptions:this.resetShowOptions,resetProducts:this.resetProducts})},this.props.children)}}]),t}(n.Component),y=N.Consumer,O=function(e){return c.a.createElement("nav",{className:"navbar navbar-expand-sm navbar-dark bg-primary"},c.a.createElement("div",{className:"container"},c.a.createElement("ul",{className:"navbar-nav w-100 flex-row justify-content-between"},c.a.createElement("li",{className:"nav-item d-flex align-items-center"},c.a.createElement(d.b,{to:"/",className:"nav-link"},"Strona G\u0142\xf3wna")),c.a.createElement("li",{className:"nav-item d-flex align-items-center"},c.a.createElement(d.b,{to:"/cart",className:"nav-link mr-2"},c.a.createElement("i",{className:"fas fa-shopping-cart",style:{fontSize:"1.5rem"}})),c.a.createElement(y,null,(function(e){var t=e.totalAmount;return c.a.createElement("span",{className:"text-white-50"},c.a.createElement("span",{className:"mr-1"},"".concat(t,",00")),"PLN")}))))))},j=function(){return c.a.createElement("div",{className:"cart-headers container-fluid d-none d-md-block"},c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-md-2"},c.a.createElement("p",{className:"text-center text-uppercase text-secondary"},"Produkt")),c.a.createElement("div",{className:"col-md-2"},c.a.createElement("p",{className:"text-center text-uppercase text-secondary"}," Nazwa")),c.a.createElement("div",{className:"col-md-2"},c.a.createElement("p",{className:"text-center text-uppercase text-secondary"},"Cena")),c.a.createElement("div",{className:"col-md-2"},c.a.createElement("p",{className:"text-center text-uppercase text-secondary"},"Ilo\u015b\u0107")),c.a.createElement("div",{className:"col-md-2"},c.a.createElement("p",{className:"text-center text-uppercase text-secondary"},"Usu\u0144")),c.a.createElement("div",{className:"col-md-2"},c.a.createElement("p",{className:"text-center text-uppercase text-secondary"},"Warto\u015b\u0107"))))},k=function(e){var t=e.id,a=e.count,n=e.avaliableProducts;return c.a.createElement(y,null,(function(e){var r=e.changeProductCount;return c.a.createElement("ul",{className:"pagination mb-2 mb-md-0"},c.a.createElement("li",{className:"page-item"},c.a.createElement("button",{disabled:!a,onClick:function(){return r(t,"decrement")},className:"page-link text-body"},"-")),c.a.createElement("li",{className:"page-item"},c.a.createElement("span",{className:"page-link text-body"},a)),c.a.createElement("li",{className:"page-item"},c.a.createElement("button",{disabled:a===n,onClick:function(){return r(t)},className:"page-link text-body"},"+")))}))},w=function(e){var t=e.id,a=e.img,n=e.name,r=e.price,l=e.count,o=e.total,i=e.avaliableProducts;return c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-10 col-md-2 d-flex justify-content-center align-items-center mx-auto p-1"},c.a.createElement("img",{src:a,style:{height:"65px"},alt:n})),c.a.createElement("div",{className:"col-10 col-md-2 d-flex justify-content-center align-items-center mx-auto"},c.a.createElement("h5",{className:"text-center"},n)),c.a.createElement("div",{className:"col-10 col-md-2 d-flex justify-content-center align-items-center mx-auto"},c.a.createElement("h5",{className:"text-center"},"".concat(r," PLN"))),c.a.createElement("div",{className:"col-10 col-md-2 d-flex justify-content-center align-items-center mx-auto"},c.a.createElement(k,{id:t,count:l,avaliableProducts:i})),c.a.createElement(y,null,(function(e){var a=e.removeItemFromCart;return c.a.createElement("div",{className:"col-10 col-md-2 d-flex justify-content-center align-items-center mx-auto"},c.a.createElement("div",{onClick:function(){return a(t)},style:{cursor:"pointer"},className:"trash-icon"},c.a.createElement("i",{className:"fas fa-trash text-warning"})))})),c.a.createElement("div",{className:"col-10 col-md-2 d-flex justify-content-center align-items-center mx-auto"},c.a.createElement("h5",{className:"text-center"},"Razem: ",c.a.createElement("span",null,o),",00 PLN")))},C=function(e){var t=e.data;return c.a.createElement("div",{className:"cart-list container-fluid"},t&&t.map((function(e,t){var a=e.id,n=e.image_url,r=e.name,l=e.price,o=e.count,i=e.total,s=e.avaliableProducts;return c.a.createElement(w,{key:a,id:a,img:n,name:r,price:l,count:o,total:i,avaliableProducts:s})})))},P=function(e){var t=e.totalAmount;return c.a.createElement("div",{className:"cart__footer container-fluid"},c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-10 col-md-12 d-flex flex-column align-items-center align-items-md-end mt-4 mx-auto"},c.a.createElement("div",{className:"d-flex flex-column flex-sm-row justify-content-center align-items-center text-uppercase mr-md-5 mb-2 text-center"},c.a.createElement("h6",{className:"mb-0"},"Razem do zap\u0142aty:"),c.a.createElement("span",{className:"h4 text-danger font-weight-bolder ml-2 mb-0"},t,",00 PLN")),c.a.createElement(y,null,(function(e){var t=e.removeAllFromCart;return c.a.createElement("div",{onClick:t,className:"btn btn-danger text-uppercase mr-md-5 mb-3"},"Opr\xf3\u017cnij koszyk")})))))},S=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(c)))).state={},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return c.a.createElement(y,null,(function(e){return c.a.createElement(c.a.Fragment,null,0===e.cart.length?c.a.createElement("h3",{className:"py-4 text-center"},"Tw\xf3j koszyk jest pusty"):c.a.createElement(c.a.Fragment,null,c.a.createElement("h3",{className:"py-4 text-center"},"Tw\xf3j koszyk"),c.a.createElement(j,null),c.a.createElement(C,{data:e.cart}),c.a.createElement(P,{totalAmount:e.totalAmount})))}))}}]),t}(n.Component),z=function(e){function t(){return Object(o.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this,t=this.props.data,a=t.inputValue,n=t.searchRes,r=t.options;return c.a.createElement(c.a.Fragment,null,a&&0!==n.length&&0!==r.length&&c.a.createElement(c.a.Fragment,null,c.a.createElement("ul",{className:"list-group position-absolute"},n.map((function(t){return c.a.createElement("li",{key:t,className:"list-group-item",onClick:e.props.handleClick},t)})))))}}]),t}(n.Component),F=(a(36),function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(c)))).state={productNumber:325,perPage:25,inputValue:"",searchRes:"",options:[]},a.handleSubmit=function(e){if(e.preventDefault(),""!==a.state.inputValue){var t=a.state.inputValue;a.context.getSearchOptions(t),"/search"!==a.props.history.location.pathname&&a.props.history.push("/search"),a.setState({inputValue:""})}},a.handleInput=function(e){var t=a.state.options.filter((function(t){return-1!==t.toLowerCase().indexOf(e.target.value.toLowerCase())}));a.setState({searchRes:t,inputValue:e.target.value})},a.handleClick=function(e){var t=e.target.innerText;a.context.getSearchOptions(t),"/search"!==a.props.history.location.pathname&&a.props.history.push("/search"),a.setState({inputValue:""})},a.getOptionNames=function(){for(var e=a.state,t=e.productNumber,n=e.perPage,c=e.options,r=1;r<=t/n;r++){var l="https://api.punkapi.com/v2/beers?page=".concat(r);fetch(l).then((function(e){return e.json()})).then((function(e){return e.map((function(e){return c.push(e.name)}))})).catch((function(e){return console.log("B\u0142\u0105d",e)}))}a.setState({options:c})},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.getOptionNames()}},{key:"render",value:function(){return c.a.createElement("div",{className:"search-engine container my-3 my-md-5 pt-2"},c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-12 col-md-9 col-lg-7 px-2 mx-auto position-relative"},c.a.createElement("form",{onSubmit:this.handleSubmit},c.a.createElement("div",{className:"input-group"},c.a.createElement("input",{value:this.state.inputValue,onChange:this.handleInput,className:"form-control",placeholder:"Wyszukaj piwo...",type:"text"}),c.a.createElement("div",{className:"input-group-append"},c.a.createElement("button",{className:"btn btn-warning",type:"submit"},"Wyszukaj")))),c.a.createElement(z,{data:this.state,handleClick:this.handleClick}))))}}]),t}(n.Component));F.contextType=N;var A=F,_=function(e){var t=e.data,a=t.id,n=t.image_url,r=t.name,l=t.text,o=t.price,i=t.size,s=t.inCart,u=l.slice(0,150);return c.a.createElement("div",{className:"col-md-6 col-lg-4 d-flex align-items-stretch p-2"},c.a.createElement("div",{className:"card"},c.a.createElement("div",{className:"row flex-grow-1 no-gutters"},c.a.createElement("div",{className:"col-4 d-flex flex-column align-items-center justify-content-around pl-3 py-2"},c.a.createElement("img",{className:"card-img",style:{height:"".concat(i.height,"px"),width:"".concat(i.width,"px")},src:n,alt:r}),c.a.createElement("span",{className:"price pt-1"},c.a.createElement("i",null,o," z\u0142"))),c.a.createElement("div",{className:"col-8 d-flex align-items-stretch"},c.a.createElement("div",{className:"card-body d-flex flex-column justify-content-between align-items-start"},c.a.createElement("h5",{className:"card-title"},r),c.a.createElement("p",{className:"card-text"},150!==u.length?u:"".concat(u,"...")),c.a.createElement(y,null,(function(e){return c.a.createElement("button",{disabled:!!s,onClick:function(){e.openModal(a),e.addToCart(a)},className:"btn btn-primary"},s?"Dodano do koszyka":"Dodaj do koszyka")})))))))},T=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(c)))).state={screenWidth:window.innerWidth,colNumb:""},a.setColNum=function(){a.state.screenWidth>=992?a.setState({colNumb:3}):a.setState({colNumb:2})},a.handleResolutionChange=function(){(a.state.screenWidth>=992?window.innerWidth<992:window.innerWidth>=992)&&(a.setState({screenWidth:window.innerWidth}),a.setColNum())},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.handleResolutionChange)}},{key:"componentDidMount",value:function(){this.setColNum(),window.addEventListener("resize",this.handleResolutionChange)}},{key:"render",value:function(){var e=this;return c.a.createElement(y,null,(function(t){var a=t.products;return c.a.createElement("div",{className:"product-list container"},a.length>0&&e.state.colNumb&&c.a.createElement(c.a.Fragment,null,a.map((function(e){return c.a.createElement(_,{key:e.id,data:e})})).reduce((function(t,a,n){return n%e.state.colNumb===0&&t.push([]),t[t.length-1].push(a),t}),[]).map((function(e,t){return c.a.createElement("div",{key:t,className:"row"},e)}))))}))}}]),t}(n.Component),I=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).middleButtons=function(e,t){for(var a=[],n=e;n<=t;n++)a.push(n);return a},a.getPageList=function(e){var t=e.productNumber,n=e.pageLimit,r=e.currentPage,l=Math.ceil(t/n),o=Math.max(2,r-1),i=Math.min(l-1,r+1),s="previous",u=i===l-1;return(2===o?[1].concat(Object(f.a)(a.middleButtons(o,o+2)),["next",l]):u?[1,s].concat(Object(f.a)(a.middleButtons(i-2,i)),[l]):[1,s].concat(Object(f.a)(a.middleButtons(o,i)),["next",l])).map((function(e){return c.a.createElement(W,{key:e,number:e,currentPage:r,handleClick:a.handleClick})}))},a.handleClick=function(e){a.context.changePage(e)},a.divContainer=c.a.createRef(),a.state={},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidUpdate",value:function(){this.context.productsUpdate&&this.divContainer.current.scrollIntoView()}},{key:"render",value:function(){var e=this;return c.a.createElement("div",{className:"container"},c.a.createElement("div",{className:"row justify-content-center my-5"},c.a.createElement("div",{className:"pagination",ref:this.divContainer},c.a.createElement(y,null,(function(t){return c.a.createElement(c.a.Fragment,null,e.getPageList(t))})))))}}]),t}(n.Component);I.contextType=N;var M=I,W=function(e){var t=e.number,a=e.currentPage,n=e.handleClick;return"previous"===t?c.a.createElement("li",{className:"page-item"},c.a.createElement("div",{onClick:function(){return n(t)},className:"page-link",style:{cursor:"pointer"}},c.a.createElement("i",{className:"fas fa-angle-double-left"}))):"next"===t?c.a.createElement("li",{className:"page-item"},c.a.createElement("div",{onClick:function(){return n(t)},className:"page-link",style:{cursor:"pointer"}},c.a.createElement("i",{className:"fas fa-angle-double-right"}))):c.a.createElement("li",{className:"page-item ".concat(t===a?"active":"")},c.a.createElement("div",{onClick:function(){return n(t)},className:"page-link font-weight-bolder",style:{cursor:"pointer"}},t))},D=function(e){function t(){return Object(o.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.context.getProducts()}},{key:"componentWillUnmount",value:function(){this.context.resetProducts()}},{key:"render",value:function(){return c.a.createElement(y,null,(function(e){var t=e.products;return c.a.createElement(c.a.Fragment,null,t.length>0&&c.a.createElement(c.a.Fragment,null,c.a.createElement(T,null),c.a.createElement(M,null)))}))}}]),t}(n.Component);D.contextType=N;var L=D,R=function(e){function t(){return Object(o.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentWillUnmount",value:function(){this.context.resetShowOptions(),this.context.resetProducts()}},{key:"render",value:function(){return c.a.createElement(c.a.Fragment,null,c.a.createElement(y,null,(function(e){var t=e.searchPhrase,a=e.showOptions,n=e.products;return console.log(a),c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"search"},n.length>0&&a&&c.a.createElement(c.a.Fragment,null,c.a.createElement("h3",{className:"text-center py-4"},"Wyniki wyszukiwania dla: ".concat(t)),c.a.createElement(T,null)),0===n.length&&a&&c.a.createElement(c.a.Fragment,null,c.a.createElement("h3",{className:"text-center py-4"},"Wyniki wyszukiwania dla: ".concat(t)),c.a.createElement("p",{className:"text-center py-4"},"Brak produkt\xf3w spe\u0142niaj\u0105cych kryteria wy\u015bwietlania")," }")))})))}}]),t}(n.Component);R.contextType=N;var U=R,V=(a(37),function(){return c.a.createElement(c.a.Fragment,null,c.a.createElement(y,null,(function(e){var t=e.modalProduct,a=t.image_url,n=t.name,r=t.price,l=t.size;if(e.modalIsOpen)return c.a.createElement("div",{className:"modal-window"},c.a.createElement("div",{className:"container"},c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"modal-window__content col-8 col-md-6 col-lg-4 mx-auto p-4 d-flex flex-column align-items-center"},c.a.createElement("h5",{className:"p-2 text-center"},"Dodano produkt do koszyka"),c.a.createElement("img",{className:"modal-window__image",style:{height:"".concat(l.height,"px"),width:"".concat(l.width,"px")},src:a,alt:n}),c.a.createElement("h5",{className:"pt-2 text-center"},n),c.a.createElement("h5",{className:"text-muted"},"Cena: ".concat(r," z\u0142")),c.a.createElement("button",{onClick:e.closeModal,className:"btn btn-primary mb-2"},"Wr\xf3\u0107 do zakup\xf3w"),c.a.createElement(d.c,{to:"/cart"},c.a.createElement("button",{onClick:e.closeModal,className:"btn btn-warning mb-3"},"Przejdz do koszyka"))))))})))}),B=function(){return c.a.createElement("div",{className:"vh-100 d-flex justify-content-center align-items-center"},c.a.createElement("h3",null,"Nie ma takiego adresu!"))},J=function(e){function t(){return Object(o.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return c.a.createElement(x,null,c.a.createElement(d.a,{basename:"/punk_api"},c.a.createElement(p.a,{exact:!0,path:["/","/search","/cart"],component:O}),c.a.createElement(p.a,{exact:!0,path:["/","/search"],component:A}),c.a.createElement(p.c,null,c.a.createElement(p.a,{exact:!0,path:"/",component:L}),c.a.createElement(p.a,{exact:!0,path:"/search",component:U}),c.a.createElement(p.a,{exact:!0,path:"/cart",component:S}),c.a.createElement(p.a,{component:B})),c.a.createElement(V,null)))}}]),t}(n.Component);l.a.render(c.a.createElement(J,null),document.getElementById("root"))}},[[25,1,2]]]);
//# sourceMappingURL=main.032ff455.chunk.js.map